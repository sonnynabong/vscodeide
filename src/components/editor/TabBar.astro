---
interface Props {
  activeTab?: string;
}
const { activeTab = 'Featured.tsx' } = Astro.props;

const tabs = [
  { name: 'Featured.tsx', icon: 'code', active: true },
  { name: 'About.js', icon: 'js', active: false, italic: true },
  { name: 'Skills.json', icon: 'braces', active: false }
];
---

<div class="flex h-9 bg-sidebar-bg overflow-x-auto select-none" id="tab-bar">
  {tabs.map(tab => (
    <div 
      class={`tab-item flex items-center h-full px-3 text-sm min-w-fit cursor-pointer group pr-2 border-r border-[#1e2933] transition-all ${
        tab.name === activeTab 
          ? 'bg-editor-bg border-t-2 border-primary text-white' 
          : 'bg-[#16202a] text-[#92adc9] hover:text-white'
      }`}
      data-tab={tab.name}
    >
      {tab.icon === 'code' && <span class="material-symbols-outlined text-sm mr-2 text-primary" data-weight="fill">code</span>}
      {tab.icon === 'js' && <span class="text-syntax-yellow text-[10px] font-bold mr-2">JS</span>}
      {tab.icon === 'braces' && <span class="text-syntax-purple font-mono text-[10px] font-bold mr-2">{}</span>}
      <span class={tab.italic ? 'italic' : ''}>{tab.name}</span>
      <span class="opacity-0 group-hover:opacity-100 hover:bg-[#324d67] rounded p-0.5 text-xs material-symbols-outlined ml-2">close</span>
    </div>
  ))}
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const tabItems = document.querySelectorAll('.tab-item');
    
    tabItems.forEach(tab => {
      tab.addEventListener('click', () => {
        // Remove active state from all tabs
        tabItems.forEach(t => {
          t.classList.remove('bg-editor-bg', 'border-t-2', 'border-primary', 'text-white');
          t.classList.add('bg-[#16202a]', 'text-[#92adc9]');
        });
        
        // Add active state to clicked tab
        tab.classList.remove('bg-[#16202a]', 'text-[#92adc9]');
        tab.classList.add('bg-editor-bg', 'border-t-2', 'border-primary', 'text-white');
      });
    });
  });
</script>
